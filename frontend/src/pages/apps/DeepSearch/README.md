# DeepSearch 深度研究页面

## 设计思路

本页面参考了 `streaming` 文件夹的设计思路，采用左右分栏布局，提供更好的用户体验。

## 页面布局

```
┌────────────────────────────────────────────────────────────┐
│                      顶部背景区域                            │
├──────────────────────────┬─────────────────────────────────┤
│                          │                                 │
│    左侧对话区域            │      右侧研究进度区域             │
│                          │                                 │
│  ┌──────────────┐        │    ┌────────────────────┐      │
│  │ 用户问题气泡   │        │    │ 研究标题            │      │
│  └──────────────┘        │    ├────────────────────┤      │
│                          │    │                    │      │
│  ┌──────────────┐        │    │  • 研究计划         │      │
│  │ AI 回答气泡   │        │    │  • 搜索方向         │      │
│  └──────────────┘        │    │  • 搜索结果         │      │
│                          │    │  • 反思过程         │      │
│  ┌──────────────────┐    │    │  • 优化总结         │      │
│  │ 底部悬浮输入框    │    │    │  • 最终报告         │      │
│  └──────────────────┘    │    │                    │      │
│                          │    └────────────────────┘      │
└──────────────────────────┴─────────────────────────────────┘
```

## 组件结构

### 1. Ask 组件（底部悬浮输入框）
- 位置：相对于左侧区域绝对定位在底部
- 功能：
  - 输入研究主题
  - 支持 Enter 提交，Shift+Enter 换行
  - 流式模式下显示停止按钮
- 样式：白色卡片，大圆角，阴影效果

### 2. Answer 组件（左侧对话区域）
- 功能：显示问答对话历史
- 特点：
  - 用户问题：右侧对齐，蓝色背景气泡
  - AI 回答：左侧对齐，灰色背景气泡
  - 加载动画：三个点跳动效果
- 样式：简洁的对话气泡设计

### 3. Result 组件（右侧研究进度卡片）
- 功能：实时展示研究进度和结果
- 特点：
  - 标题栏：显示研究主题，可折叠/展开
  - 内容区：滚动显示各种事件类型
  - 支持的事件类型：
    - `WEB_SEARCHING`: 网络搜索中
    - `RESEARCH_PLAN`: 研究计划
    - `WEB_RESULT`: 搜索结果
    - `REFLECTION`: 反思过程
    - `OPTIMIZATION`: 优化总结
    - `REPORT_GENERATED`: 报告生成
    - `COMPLETED`: 研究完成
- 交互：
  - 可折叠思考过程
  - 可查看/下载最终报告
  - 可关闭卡片

### 4. DeepSearch 主页面
- 功能：协调各组件，处理状态管理
- 状态管理：
  - `messages`: 对话消息列表
  - `streaming`: 流式请求状态
  - `currentSession`: 当前研究会话
- 特点：
  - 左右分栏自适应布局
  - 有研究会话时，左侧缩小为 48%，右侧占 50%
  - 无研究会话时，左侧占满全宽
  - 响应式设计，移动端垂直布局

## 样式特点

### 1. 背景渐变
- 深蓝色渐变背景，营造专业的研究氛围
- 顶部背景条带有模糊效果

### 2. 动画效果
- 右侧卡片：滑入动画（从右向左）
- 加载动画：三个点跳动效果
- 折叠/展开：平滑的高度过渡

### 3. 响应式设计
- 桌面端：左右分栏
- 移动端：垂直堆叠

## 使用的技术

- **React Hooks**: useState, useRef
- **Ant Design**: message 提示组件
- **React Markdown**: Markdown 报告渲染
- **SSE 流式传输**: 实时接收研究进度

## 优势

1. **清晰的信息架构**：左侧对话，右侧进度，职责分明
2. **实时反馈**：流式接口实时展示研究进度
3. **良好的交互体验**：可折叠、可关闭、支持下载
4. **现代化 UI**：渐变背景、圆角卡片、流畅动画
5. **响应式布局**：适配桌面和移动端

## 事件流程

```
用户提交问题
    ↓
创建研究会话
    ↓
开始流式请求
    ↓
接收事件流 → 更新对话消息 + 更新右侧进度卡片
    ↓
研究完成 → 显示最终报告
```

